{% extends 'base.html' %}

{% block title %}Setup New Blog - Blog Automation Platform{% endblock %}

{% block content %}
<div class="row mb-4">
    <div class="col-md-12">
        <div class="card">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h4 class="mb-0">New Blog Setup</h4>
                <a href="{{ url_for('index') }}" class="btn btn-secondary">Back to Dashboard</a>
            </div>
            <div class="card-body">
                <form id="setupForm" method="POST" action="{{ url_for('setup') }}">
                    <div class="mb-3">
                        <label for="blogName" class="form-label">Blog Name</label>
                        <input type="text" class="form-control" id="blogName" name="blog_name" required placeholder="Travel Adventures Blog">
                        <div class="form-text">A descriptive name for your blog</div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="blogTheme" class="form-label">Blog Theme</label>
                        <input type="text" class="form-control" id="blogTheme" name="theme" required placeholder="Sustainable Travel">
                        <div class="form-text">The main theme of your blog (e.g., Technology, Finance, Travel)</div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="topicKeywords" class="form-label">Topic Keywords</label>
                        <input type="text" class="form-control" id="topicKeywords" name="topic_keywords" required placeholder="eco-friendly, carbon offset, responsible tourism">
                        <div class="form-text">Comma-separated keywords related to your blog theme</div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="contentFrequency" class="form-label">Content Generation Frequency</label>
                        <select class="form-select" id="contentFrequency" name="frequency" required>
                            <option value="daily">Daily</option>
                            <option value="weekly" selected>Weekly</option>
                            <option value="biweekly">Bi-weekly</option>
                            <option value="monthly">Monthly</option>
                        </select>
                        <div class="form-text">How often new content should be generated</div>
                    </div>
                    
                    <h5 class="mt-4 mb-3">WordPress Integration</h5>
                    
                    <div class="mb-3">
                        <label for="wordpressUrl" class="form-label">WordPress Site URL</label>
                        <input type="url" class="form-control" id="wordpressUrl" name="wordpress_url" placeholder="https://example.com">
                        <div class="form-text">The URL of your WordPress site (leave blank to skip WordPress integration)</div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="wordpressUsername" class="form-label">WordPress Username</label>
                        <input type="text" class="form-control" id="wordpressUsername" name="wordpress_username" placeholder="admin">
                    </div>
                    
                    <div class="mb-3">
                        <label for="wordpressAppPassword" class="form-label">WordPress Application Password</label>
                        <input type="password" class="form-control" id="wordpressAppPassword" name="wordpress_app_password">
                        <div class="form-text">An application password generated in your WordPress admin dashboard</div>
                    </div>
                    
                    <h5 class="mt-4 mb-3">Domain Suggestions</h5>
                    
                    <div class="mb-3 form-check">
                        <input type="checkbox" class="form-check-input" id="enableDomainSuggestions" name="enable_domain_suggestions" value="1">
                        <label class="form-check-label" for="enableDomainSuggestions">Enable domain name suggestions</label>
                    </div>
                    
                    <div class="mb-3">
                        <label for="maxPrice" class="form-label">Maximum Domain Price (USD)</label>
                        <input type="number" class="form-control" id="maxPrice" name="max_price" value="50" min="1" max="1000">
                    </div>
                    
                    <h5 class="mt-4 mb-3">Content Settings</h5>
                    
                    <div class="mb-3">
                        <label for="contentLength" class="form-label">Average Content Length (words)</label>
                        <select class="form-select" id="contentLength" name="content_length">
                            <option value="500">Short (~500 words)</option>
                            <option value="1000" selected>Medium (~1000 words)</option>
                            <option value="1500">Long (~1500 words)</option>
                            <option value="2000">Very Long (~2000+ words)</option>
                        </select>
                    </div>
                    
                    <div class="mb-3">
                        <label for="contentStyle" class="form-label">Content Style</label>
                        <select class="form-select" id="contentStyle" name="content_style">
                            <option value="informative" selected>Informative</option>
                            <option value="conversational">Conversational</option>
                            <option value="professional">Professional</option>
                            <option value="casual">Casual</option>
                            <option value="technical">Technical</option>
                        </select>
                    </div>
                    
                    <div class="mb-3 form-check">
                        <input type="checkbox" class="form-check-input" id="includeFeaturedImage" name="include_featured_image" value="1" checked>
                        <label class="form-check-label" for="includeFeaturedImage">Include AI-generated featured images</label>
                    </div>
                    
                    <h5 class="mt-4 mb-3">Social Media Promotion</h5>
                    
                    <div class="mb-3 form-check">
                        <input type="checkbox" class="form-check-input" id="enableSocialPromotion" name="enable_social_promotion" value="1" checked>
                        <label class="form-check-label" for="enableSocialPromotion">Enable automatic social media promotion</label>
                        <div class="form-text">If enabled, new blog posts will be automatically promoted on social media.</div>
                    </div>
                    
                    <div class="mb-3" id="socialPlatformsContainer">
                        <label class="form-label">Platforms to use</label>
                        <div class="d-flex flex-wrap gap-3">
                            <div class="form-check">
                                <input type="checkbox" class="form-check-input social-platform" value="twitter" name="social_platforms" id="platformTwitter" checked>
                                <label class="form-check-label" for="platformTwitter">Twitter</label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" class="form-check-input social-platform" value="linkedin" name="social_platforms" id="platformLinkedIn" checked>
                                <label class="form-check-label" for="platformLinkedIn">LinkedIn</label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" class="form-check-input social-platform" value="facebook" name="social_platforms" id="platformFacebook" checked>
                                <label class="form-check-label" for="platformFacebook">Facebook</label>
                            </div>
                        </div>
                    </div>
                    
                    <button type="submit" class="btn btn-primary">Create Blog</button>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // WordPress field toggle
    const wordpressFields = document.querySelectorAll('#wordpressUsername, #wordpressAppPassword');
    const wordpressUrl = document.querySelector('#wordpressUrl');
    
    // Initial check
    toggleWordpressFields();
    wordpressUrl.addEventListener('input', toggleWordpressFields);
    
    function toggleWordpressFields() {
        const isEnabled = wordpressUrl.value.trim() !== '';
        wordpressFields.forEach(field => {
            field.disabled = !isEnabled;
            if (isEnabled) {
                field.required = true;
            } else {
                field.required = false;
                field.value = '';
            }
        });
    }
    
    // Social media platform toggle
    const enableSocialPromotion = document.querySelector('#enableSocialPromotion');
    const socialPlatformsContainer = document.querySelector('#socialPlatformsContainer');
    const socialPlatforms = document.querySelectorAll('.social-platform');
    
    // Initial check
    toggleSocialPlatforms();
    enableSocialPromotion.addEventListener('change', toggleSocialPlatforms);
    
    function toggleSocialPlatforms() {
        const isEnabled = enableSocialPromotion.checked;
        socialPlatformsContainer.style.opacity = isEnabled ? '1' : '0.5';
        socialPlatforms.forEach(platform => {
            platform.disabled = !isEnabled;
        });
    }
});
</script>
{% endblock %}